if (SERVER) then return end

local size = 1024
local goodboi = Material("phoenix_storms/bluemetal")

local function SameDrawFunction(x)
    surface.SetDrawColor(255,0,0)
    surface.SetMaterial(goodboi)
    surface.DrawTexturedRect(x,50,50,50)
    draw.SimpleText(x,"DermaDefault",x + 15,65,Color(255,255,255,255),TEXT_ALIGN_LEFT,TEXT_ALIGN_TOP)

end

local function GenerateMat()
    --local renderTarget = GetRenderTarget()
    local renderTarget = GetRenderTargetEx("TheFuck",size,size, RT_SIZE_OFFSCREEN, MATERIAL_RT_DEPTH_NONE, 0, 0, IMAGE_FORMAT_RGBA8888)
    render.PushRenderTarget(renderTarget,0,0,size,size)
    render.Clear(0,0,0,0)

    cam.Start2D()

        surface.SetDrawColor(255,255,255)
        surface.DrawRect(50,50,50,50)

        SameDrawFunction(100)

    cam.End2D()

    render.PopRenderTarget()

    local shitMat = CreateMaterial("TheFuck","UnlitGeneric",{
        ["$basetexture"] = "",
        ["$vertexcolor"] = 1,
        ["$vertexalpha"] = 1
    })
    shitMat:SetTexture("$basetexture",renderTarget)
    return Material("!TheFuck")
end

local mat = GenerateMat()
hook.Add("HUDPaint","fullblown_example",function()
    surface.SetMaterial(mat)
    surface.SetDrawColor(255,255,255,255)
    --surface.DrawTexturedRect(0, 0, size,size)

    --SameDrawFunction(150)
end)